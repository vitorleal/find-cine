/*!
 * NWMatcher 1.3.0 - Fast CSS3 Selector Engine
 * Copyright (C) 2007-2012 Diego Perini
 * See http://nwbox.com/license
 */
(function(d,e){if(typeof module==='object'&&typeof exports==='object'){module.exports=function(b){var a={};e(b,a);return a}}else{if(!d.NW){d.NW={}}if(!d.NW.Dom){d.NW.Dom={}}e(d,d.NW.Dom)}})(this,function(x,bn){var bH='nwmatcher-1.3.0',g=bn,i=x.document,t=i.documentElement,bI=[].slice,bc,J,y,z,u,bd,be,bf,bg,K='[#.:]?',bh='([~*^$|!]?={1})',p='[\\x20\\t\\n\\r\\f]*',bi='[\\x20]|[>+~][^>+~]',bj='(?:[-+]?\\d*n)?[-+]?\\d*',L='"[^"]*"'+"|'[^']*'",M='\\[.*\\]|\\(.*\\)|\\{.*\\}',n='(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)',A='(?:-?[_0-zA-Z]{1}[-\\w]*|[^\\x00-\\xa0]+|\\\\.+)+',bk='('+L+'|'+A+')',v=p+'('+n+'+:?'+n+'+)'+p+'(?:'+bh+p+bk+')?'+p,bo=v.replace(bk,'([\\x22\\x27]*)((?:\\\\?.)*?)\\3'),B='((?:'+bj+'|'+L+'|'+K+'|'+n+'+|\\['+v+'\\]|\\(.+\\)|'+p+'|,)+)',bp='.+',N='(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|(?:'+K+A+')|'+bi+'|\\['+v+'\\]|\\('+B+'\\)|\\{'+bp+'\\}|(?:,|'+p+'))+',bq=N.replace(B,'.*'),O=RegExp(N,'g'),P=RegExp('^'+p+'|'+p+'$','g'),Q=RegExp('([^,\\\\()[\\]]+|\\[[^[\\]]*\\]|\\[.*\\]|\\([^()]+\\)|\\(.*\\)|\\{[^{}]+\\}|\\{.*\\}|\\\\.)+','g'),br=RegExp('(\\['+v+'\\]|\\('+B+'\\)|[^\\x20\\t\\n\\r\\f>+~]|\\\\.)+','g'),bs=/[\x20\t\n\r\f]+/g,bt=RegExp(A+'|^$'),bu={checked:1,disabled:1,ismap:1,multiple:1,readonly:1,selected:1},bl={value:'defaultValue',checked:'defaultChecked',selected:'defaultSelected'},bv={action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2},s={},w={'=':"n=='%m'",'^=':"n.indexOf('%m')==0",'*=':"n.indexOf('%m')>-1",'|=':"(n+'-').indexOf('%m-')==0",'~=':"(' '+n+' ').indexOf(' %m ')>-1",'$=':"n.substr(n.length-'%m'.length)=='%m'"},C={ID:RegExp('^\\*?#('+n+'+)|'+M),TAG:RegExp('^('+n+'+)|'+M),CLASS:RegExp('^\\*?\\.('+n+'+$)|'+M)},q={universal:/^\*(.*)/,id:RegExp('^#('+n+'+)(.*)'),tagName:RegExp('^('+n+'+)(.*)'),className:RegExp('^\\.('+n+'+)(.*)'),attribute:RegExp('^\\['+bo+'\\](.*)'),children:/^[\x20\t\n\r\f]*\>[\x20\t\n\r\f]*(.*)/,adjacent:/^[\x20\t\n\r\f]*\+[\x20\t\n\r\f]*(.*)/,relative:/^[\x20\t\n\r\f]*\~[\x20\t\n\r\f]*(.*)/,ancestor:/^[\x20\t\n\r\f]+(.*)/},R,r,bw='getElementsByTagName'in i,bx='getElementsByClassName'in i,S=typeof i.addEventListener!='function',by={'href':1,'lang':1,'src':1,'style':1,'title':1,'type':1,'xmlns':1,'xml:lang':1,'xml:space':1},bz=S?'.toUpperCase()':'',T='r[r.length]=c[k];if(f&&false===f(c[k]))break main;else continue main;',bA=S?'if(e.nodeName<"A")continue;':'',l={CACHING:false,SIMPLENOT:true,UNIQUE_ID:true,USE_HTML5:true,VERBOSITY:true},bB=function(b){if(typeof b=='string'){return l[b]}if(typeof b!='object'){return false}for(var a in b){l[a]=!!b[a];if(a=='SIMPLENOT'){U={};D={};V={};E={}}}O=RegExp(l.SIMPLENOT?N:bq,'g');return true},bC=function(b,a,d){var e=-1,h;while((h=a[++e])){if(false===d(b[b.length]=h)){break}}return b},m=function(b){if(l.VERBOSITY){throw Error(b);}if(x.console&&x.console.log){x.console.log(b)}},F=function(a,d){var e=i;z=a;i=a.ownerDocument||a;if(d||e!==i){t=i.documentElement;r=i.createElement('DiV').nodeName=='DiV';R=!r&&typeof i.compatMode=='string'?i.compatMode.indexOf('CSS')<0:(function(){var b=document.createElement('div').style;return b&&(b.width=1)&&b.width=='1px'})();l.CACHING&&g.setCache(true,i)}},W=function(b,a){var d=0,e=null;while((e=a[d])){if(e.getAttribute('id')==b){break}++d}return e},G=!('fileSize'in i)?function(b,a){b=b.replace(/\\([^\\]{1})/g,'$1');return a.getElementById&&a.getElementById(b)||W(b,a.getElementsByTagName('*'))}:function(b,a){var d=null;b=b.replace(/\\([^\\]{1})/g,'$1');if(r||a.nodeType!=9){return W(b,a.getElementsByTagName('*'))}if((d=a.getElementById(b))&&d.name==b&&a.getElementsByName){return W(b,a.getElementsByName(b))}return d},bD=function(b,a){a||(a=i);if(z!==a){F(a)}return G(b,a)},bE=function(b,a){a=a.toLowerCase();if(typeof b[a]=='object'){return b.attributes[a]&&b.attributes[a].value||''}return(a=='type'?b.getAttribute(a)||'':bv[a]?b.getAttribute(a,2)||'':bu[a]?b.getAttribute(a)?a:'false':((b=b.getAttributeNode(a))&&b.value)||'')},bF=t.hasAttribute?function(b,a){return b.hasAttribute(a)}:function(b,a){a=a.toLowerCase();if(bl[a]){return!!b[bl[a]]}b=b.getAttributeNode(a);return!!(b&&b.specified)},X=function(b,a,d){var e=typeof b=='string'?b.match(Q):b;typeof a=='string'||(a='');if(e.length==1){a+=bm(e[0],d?T:'f&&f(k);return true;',d)}else{var h=-1,c={},f;while((f=e[++h])){f=f.replace(P,'');if(!c[f]&&(c[f]=true)){a+=bm(f,d?T:'f&&f(k);return true;',d)}}}if(d)return Function('c,s,r,d,h,g,f,v','var N,n,x=0,k=-1,e;main:while((e=c[++k])){'+a+'}return r;');else return Function('e,s,r,d,h,g,f,v','var N,n,x=0,k=e;'+a+'return false;')},H='var z=v[@]||(v[@]=[]),l=z.length-1;while(l>=0&&z[l]!==e)--l;if(l!==-1){break;}z[z.length]=e;',bm=function(b,a,d){var e=0,h,c,f,j,k,o,Y;while(b){e++;if((c=b.match(q.universal))){h=''}else if((c=b.match(q.id))){a='if('+(r?'s.getAttribute(e,"id")':'(e.submit?s.getAttribute(e,"id"):e.id)')+'=="'+c[1]+'"){'+a+'}'}else if((c=b.match(q.tagName))){a='if(e.nodeName'+(r?'=="'+c[1]+'"':bz+'=="'+c[1].toUpperCase()+'"')+'){'+a+'}'}else if((c=b.match(q.className))){a='if((n='+(r?'e.getAttribute("class")':'e.className')+')&&n.length&&(" "+'+(R?'n.toLowerCase()':'n')+'.replace('+bs+'," ")+" ").indexOf(" '+(R?c[1].toLowerCase():c[1])+' ")>-1){'+a+'}'}else if((c=b.match(q.attribute))){if(c[2]&&!w[c[2]]){m('Unsupported operator in attribute selectors "'+b+'"');return''}o='false';if(c[4]){Y=by[c[1].toLowerCase()];c[4]=(Y?c[4].toLowerCase():c[4]).replace(/\\([0-9a-f]{2,2})/g,'\\x$1').replace(/(\x22|\x27)/g,'\\$1')}if(c[2]&&c[4]&&(o=w[c[2]])){o=o.replace(/\%m/g,c[4])}else if(c[2]=='!='||c[2]=='='){o='n'+c[2]+'="'+c[4]+'"'}h='n=s.'+(c[2]?'get':'has')+'Attribute(e,"'+c[1]+'")'+(Y?'.toLowerCase();':';');a=h+'if('+(c[2]?o:'n')+'){'+a+'}'}else if((c=b.match(q.adjacent))){a=(d?'':H.replace(/@/g,e))+a;a='var N'+e+'=e;while(e&&(e=e.previousSibling)){if(e.nodeName>"@"){'+a+'break;}}e=N'+e+';'}else if((c=b.match(q.relative))){a=(d?'':H.replace(/@/g,e))+a;a='var N'+e+'=e;e=e.parentNode.firstChild;while(e&&e!==N'+e+'){if(e.nodeName>"@"){'+a+'}e=e.nextSibling;}e=N'+e+';'}else if((c=b.match(q.children))){a=(d?'':H.replace(/@/g,e))+a;a='var N'+e+'=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){'+a+'break;}e=N'+e+';'}else if((c=b.match(q.ancestor))){a=(d?'':H.replace(/@/g,e))+a;a='var N'+e+'=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){'+a+'}e=N'+e+';'}else{h=false;k=false;for(h in s){if((c=b.match(s[h].Expression))&&c[1]){j=s[h].Callback(c,a);a=j.source;k=j.status;if(k){break}}}if(!k){m('Unknown pseudo-class selector "'+b+'"');return''}if(!h){m('Unknown token in selector "'+b+'"');return''}}if(!c){m('Invalid syntax in selector "'+b+'"');return''}b=c&&c[c.length-1]}return a},Z=function(b,a,d,e){var h;if(!(b&&b.nodeName>'@')){m('Invalid element argument');return false}else if(!a||typeof a!='string'){m('Invalid selector argument');return false}else if(z!==d){F(d||(d=b.ownerDocument))}a=a.replace(P,'');l.SHORTCUTS&&(a=NW.Dom.shortcuts(a,b,d));if(bd!=a){if((h=a.match(O))&&h[0]==a){bc=(h=a.match(Q)).length<2;bd=a;bf=h}else{m('The string "'+a+'", is not a valid CSS selector');return false}}else h=bf;if(!D[a]||U[a]!==d){D[a]=X(bc?[a]:h,'',false);U[a]=d}return D[a](b,ba,[],i,t,d,e,{})},bG=function(b,a){return bb(b,a,function(){return false})[0]||null},bb=function(b,a,d){var e,h,c,f,j,k,o=b;if(arguments.length===0){m('Not enough arguments');return[]}else if(typeof b!='string'){return[]}else if(!(/[>+~*\w\u00a1-\uffff]/.test(b))){m('Invalid or illegal selector string');return[]}else if(a&&!(/1|9|11/).test(a.nodeType)){m('Invalid or illegal context element');return[]}else if(z!==a){F(a||(a=i))}if(l.CACHING&&(f=g.loadResults(o,a,i,t))){return d?bC([],f,d):f}b=b.replace(P,'');l.SHORTCUTS&&(b=NW.Dom.shortcuts(b,a));if((h=be!=b)){if((j=b.match(O))&&j[0]==b){J=(j=b.match(Q)).length<2;be=b;bg=j}else{m('The string "'+b+'", is not a valid CSS selector');return[]}}else j=bg;if(a.nodeType==11){f=a.childNodes}else if(J){if(h){j=b.match(br);k=j[j.length-1];y=k.split(':not')[0];u=b.length-k.length}if(l.UNIQUE_ID&&(j=y.match(C.ID))&&(k=j[1])){if((c=G(k,a))){if(Z(c,b)){d&&d(c);f=[c]}else f=[]}}else if(l.UNIQUE_ID&&(j=b.match(C.ID))&&(k=j[1])){if((c=G(k,i))){if('#'+k==b){d&&d(c);f=[c]}else if(/[>+~]/.test(b)){a=c.parentNode}else{a=c}}else f=[]}if(f){l.CACHING&&g.saveResults(o,a,i,f);return f}if(!r&&bw&&(j=y.match(C.TAG))&&(k=j[1])){if((f=a.getElementsByTagName(k)).length===0)return[];b=b.slice(0,u)+b.slice(u).replace(k,'*')}else if(!r&&bx&&(j=y.match(C.CLASS))&&(k=j[1])){if((f=a.getElementsByClassName(k.replace(/\\([^\\]{1})/g,'$1'))).length===0)return[];b=b.slice(0,u)+b.slice(u).replace('.'+k,bt.test(b.charAt(b.indexOf(k)-1))?'':'*')}}if(!f){if(S){f=/^(?:applet|object)$/i.test(a.nodeName)?a.childNodes:a.all}else{f=a.getElementsByTagName('*')}}if(!E[b]||V[b]!==a){E[b]=X(J?[b]:j,bA,true);V[b]=a}f=E[b](f,ba,[],i,t,a,d,{});l.CACHING&&g.saveResults(o,a,i,f);return f},I=function(b){return b},U={},D={},V={},E={},ba={byId:G,match:Z,select:bb,getAttribute:bE,hasAttribute:bF};Tokens={prefixes:K,encoding:n,operators:bh,whitespace:p,identifier:A,attributes:v,combinators:bi,pseudoclass:B,pseudoparms:bj,quotedvalue:L};g.ACCEPT_NODE=T;g.emit=m;g.byId=bD;g.match=Z;g.first=bG;g.select=bb;g.compile=X;g.configure=bB;g.Config=l;g.Operators=w;g.Selectors=s;g.Snapshot=ba;g.Tokens=Tokens;g.setCache=I;g.shortcuts=I;g.loadResults=I;g.saveResults=I;g.registerOperator=function(b,a){w[b]||(w[b]=a)};g.registerSelector=function(b,a,d){s[b]||(s[b]={Expression:a,Callback:d})};F(i,true)});
(function(){var h={'a':1,'A':1,'area':1,'AREA':1,'link':1,'LINK':1},g=document.documentElement,f='compareDocumentPosition'in g?function(b,a){return(b.compareDocumentPosition(a)&16)==16}:'contains'in g?function(b,a){return a.nodeType==1&&b.contains(a)}:function(b,a){while((a=a.parentNode)&&a.nodeType==1){if(a===b)return true}return false},i=function(b){return b.getAttribute('href')&&h[b.nodeName]},j=function(b){b=b.firstChild;while(b){if(b.nodeType==3||b.nodeName>'@')return false;b=b.nextSibling}return true},k=function(b,a){var c=1,e=a?'nextSibling':'previousSibling';while((b=b[e])){if(b.nodeName>'@')++c}return c},l=function(b,a){var c=1,e=a?'nextSibling':'previousSibling',d=b.nodeName;while((b=b[e])){if(b.nodeName==d)++c}return c};NW.Dom.Snapshot['contains']=f;NW.Dom.Snapshot['isLink']=i;NW.Dom.Snapshot['isEmpty']=j;NW.Dom.Snapshot['nthOfType']=l;NW.Dom.Snapshot['nthElement']=k})();NW.Dom.registerSelector('nwmatcher:spseudos',/^\:(root|empty|(?:first|last|only)(?:-child|-of-type)|nth(?:-last)?(?:-child|-of-type)\(\s*(even|odd|(?:[-+]{0,1}\d*n\s*)?[-+]{0,1}\s*\d*)\s*\))?(.*)/i,function(b,a){var c,e,d,h=true,g,f;switch(b[1]){case'root':if(b[3])a='if(e===h||s.contains(h,e)){'+a+'}';else a='if(e===h){'+a+'}';break;case'empty':a='if(s.isEmpty(e)){'+a+'}';break;default:if(b[1]&&b[2]){if(b[2]=='n'){a='if(e!==h){'+a+'}';break}else if(b[2]=='even'){c=2;d=0}else if(b[2]=='odd'){c=2;d=1}else{d=((e=b[2].match(/(-?\d+)$/))?parseInt(e[1],10):0);c=((e=b[2].match(/(-?\d*)n/i))?parseInt(e[1],10):0);if(e&&e[1]=='-')c=-1}g=c>1?(/last/i.test(b[1]))?'(n-('+d+'))%'+c+'==0':'n>='+d+'&&(n-('+d+'))%'+c+'==0':c<-1?(/last/i.test(b[1]))?'(n-('+d+'))%'+c+'==0':'n<='+d+'&&(n-('+d+'))%'+c+'==0':c===0?'n=='+d:(/last/i.test(b[1]))?c==-1?'n>='+d:'n<='+d:c==-1?'n<='+d:'n>='+d;a='if(e!==h){n=s['+(/-of-type/i.test(b[1])?'"nthOfType"':'"nthElement"')+'](e,'+(/last/i.test(b[1])?'true':'false')+');if('+g+'){'+a+'}}'}else if(b[1]){c=/first/i.test(b[1])?'previous':'next';e=/only/i.test(b[1])?'previous':'next';d=/first|last/i.test(b[1]);f=/-of-type/i.test(b[1])?'&&n.nodeName!==e.nodeName':'&&n.nodeName<"@"';a='if(e!==h){'+('n=e;while((n=n.'+c+'Sibling)'+f+');if(!n){'+(d?a:'n=e;while((n=n.'+e+'Sibling)'+f+');if(!n){'+a+'}')+'}')+'}'}else{h=false}break}return{'source':a,'status':h}});NW.Dom.registerSelector('nwmatcher:dpseudos',/^\:(link|visited|target|active|focus|hover|checked|disabled|enabled|selected|lang\(([-\w]{2,})\)|not\(([^()]*|.*)\))?(.*)/i,(function(){var h=document,g=NW.Dom.Config,f=NW.Dom.Tokens,i=RegExp('^'+f.whitespace+'|'+f.whitespace+'$','g'),j=RegExp('^((?!:not)('+f.prefixes+'|'+f.identifier+'|\\([^()]*\\))+|\\['+f.attributes+'\\])$');return function(b,a){var c,e=true,d;switch(b[1].match(/^\w+/)[0]){case'not':c=b[3].replace(i,'');if(g.SIMPLENOT&&!j.test(c)){NW.Dom.emit('Negation pseudo-class only accepts simple selectors "'+b.join('')+'"')}else{if('compatMode'in h){a='if(!'+NW.Dom.compile(c,'',false)+'(e,s,r,d,h,g)){'+a+'}'}else{a='if(!s.match(e, "'+c.replace(/\x22/g,'\\"')+'",g)){'+a+'}'}}break;case'checked':a='if((typeof e.form!=="undefined"&&(/^(?:radio|checkbox)$/i).test(e.type)&&e.checked)'+(g.USE_HTML5?'||(/^option$/i.test(e.nodeName)&&(e.selected||e.checked))':'')+'){'+a+'}';break;case'disabled':a='if(((typeof e.form!=="undefined"'+(g.USE_HTML5?'':'&&!(/^hidden$/i).test(e.type)')+')||s.isLink(e))&&e.disabled===true){'+a+'}';break;case'enabled':a='if(((typeof e.form!=="undefined"'+(g.USE_HTML5?'':'&&!(/^hidden$/i).test(e.type)')+')||s.isLink(e))&&e.disabled===false){'+a+'}';break;case'lang':d='';if(b[2])d=b[2].substr(0,2)+'-';a='do{(n=e.lang||"").toLowerCase();if((n==""&&h.lang=="'+b[2].toLowerCase()+'")||(n&&(n=="'+b[2].toLowerCase()+'"||n.substr(0,3)=="'+d.toLowerCase()+'"))){'+a+'break;}}while((e=e.parentNode)&&e!==g);';break;case'target':n=h.location?h.location.hash:'';if(n){a='if(e.id=="'+n.slice(1)+'"){'+a+'}'}break;case'link':a='if(s.isLink(e)&&!e.visited){'+a+'}';break;case'visited':a='if(s.isLink(e)&&e.visited){'+a+'}';break;case'active':a='if(e===d.activeElement){'+a+'}';break;case'hover':a='if(e===d.hoverElement){'+a+'}';break;case'focus':a='hasFocus'in h?'if(e===d.activeElement&&d.hasFocus()&&(e.type||e.href||!isNaN(e.tabIndex))){'+a+'}':'if(e===d.activeElement&&(e.type||e.href)){'+a+'}';break;case'selected':a='if(/^option$/i.test(e.nodeName)&&(e.selected||e.checked)){'+a+'}';break;default:e=false;break}return{'source':a,'status':e}}})());
